{"remainingRequest":"/Users/antonio/Library/Mobile Documents/com~apple~CloudDocs/Stage/Ticket-Asset-Management/interface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/antonio/Library/Mobile Documents/com~apple~CloudDocs/Stage/Ticket-Asset-Management/interface/src/components/InfoAccount.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/antonio/Library/Mobile Documents/com~apple~CloudDocs/Stage/Ticket-Asset-Management/interface/src/components/InfoAccount.vue","mtime":1628865831866},{"path":"/Users/antonio/Library/Mobile Documents/com~apple~CloudDocs/Stage/Ticket-Asset-Management/interface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonio/Library/Mobile Documents/com~apple~CloudDocs/Stage/Ticket-Asset-Management/interface/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/antonio/Library/Mobile Documents/com~apple~CloudDocs/Stage/Ticket-Asset-Management/interface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonio/Library/Mobile Documents/com~apple~CloudDocs/Stage/Ticket-Asset-Management/interface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJyAgIAppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCmltcG9ydCBWdWVBeGlvcyBmcm9tICd2dWUtYXhpb3MnIAppbXBvcnQgVnVlbGlkYXRlIGZyb20gJ3Z1ZWxpZGF0ZScKaW1wb3J0IHtyZXF1aXJlZH0gZnJvbSAndnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzJwoKVnVlLnVzZShWdWVBeGlvcywgYXhpb3MpClZ1ZS51c2UoVnVlbGlkYXRlKQoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIkluZm9BY2NvdW50IiwKICAgIAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvL3VzZXI6IHsKICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICAgICAgICAgIHBhc3N3b3JkOicnLAogICAgICAgICAgICAgICAgZmlyc3RuYW1lOicnLAogICAgICAgICAgICAgICAgbGFzdG5hbWU6JycsCiAgICAgICAgICAgICAgICBlbWFpbDonJywKICAgICAgICAgICAgICAgIHJvbGU6JycsCiAgICAgICAgICAgIC8vfQogICAgICAgICAgICAgICAgdGlja2V0czogW10sCiAgICAgICAgICAgICAgICBteURhdGUgOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCksCiAgICAgICAgICAgICAgICBidXR0b25UZXh0OiAnQ3JlYXRlIG5ldyB0aWNrZXQnLAogICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbjogJ0FjY2VwdCB0aWNrZXQnLAogICAgICAgICAgICAgICAgbmV3U3RhdHVzOiAnUGVuZGluZyBjb25maXJtYXRpb24nLAogICAgICAgICAgICAgICAgbmV3RGVzY3JpcHRpb246ICcnLAoKICAgICAgICAgICAgICAgIGFzc2V0czogW10sCiAgICAgICAgICAgICAgICBtYWludGFpbmVyczogW10sCiAgICAgICAgICAgICAgICBzZWxlY3RlZDogewogICAgICAgICAgICAgICAgICAgIGFzc2V0OiAnJywKICAgICAgICAgICAgICAgICAgICBtYWludGFpbmVyOiAnJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJ1dHRvblZpZXc6ICcnLAogICAgICAgICAgICAgICAgbWFpbnRhaW5lckJ1dHRvbjogJ0FjY2VwdCB3b3JrJywKICAgICAgICAgICAgICAgIGlucHV0TTogW10KICAgICAgICB9CiAgICB9LAogICAgdmFsaWRhdGlvbnM6IHsKICAgICAgICBzZWxlY3RlZDogewogICAgICAgICAgICBhc3NldDoge3JlcXVpcmVkfSwKICAgICAgICAgICAgbWFpbnRhaW5lcjoge3JlcXVpcmVkfSwKICAgICAgICAgICAgc2VsZWN0ZWQ6IHtyZXF1aXJlZH0KICAgICAgICB9LAogICAgICAgIG5ld0Rlc2NyaXB0aW9uOiB7cmVxdWlyZWR9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmdldERhdGEoKSwKICAgICAgICB0aGlzLmdldEFzc2V0cygpLAogICAgICAgIHRoaXMuZ2V0TWFpbnRhaW5lcnMoKQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBnZXREYXRhKCkgewogICAgICAgICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS91c2VyLyIrdGhpcy4kcm91dGUucGFyYW1zLnVzZXJuYW1lKQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudXNlcm5hbWUgPSByZXNwb25zZS5kYXRhLnVzZXJuYW1lCiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0bmFtZSA9IHJlc3BvbnNlLmRhdGEuZmlyc3RuYW1lCiAgICAgICAgICAgICAgICB0aGlzLmxhc3RuYW1lID0gcmVzcG9uc2UuZGF0YS5sYXN0bmFtZQogICAgICAgICAgICAgICAgdGhpcy5lbWFpbCA9IHJlc3BvbnNlLmRhdGEuZW1haWwKICAgICAgICAgICAgICAgIHRoaXMucm9sZSA9IHJlc3BvbnNlLmRhdGEucm9sZQoKICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RpY2tldHModGhpcy5yb2xlKSAKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGdldEFzc2V0cygpIHsKICAgICAgICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjgwODIvYXNzZXQvIikKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmFzc2V0cyA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGdldE1haW50YWluZXJzKCkgewogICAgICAgICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS91c2VyL3JvbGUvbWFpbnRhaW5lciIpCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5tYWludGFpbmVycyA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHNob3dMaXN0VXNlcnMoKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAnL2xpc3R1c2Vycy8nfSkKICAgICAgICB9LAogICAgICAgIHNob3dMaXN0QXNzZXRzKCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJy9saXN0YXNzZXRzJ30pCiAgICAgICAgfSwKICAgICAgICBsb2dvdXQoKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAnLyd9KQogICAgICAgIH0sCiAgICAgICAgc2hvd1RpY2tldHMocm9sZSkgewogICAgICAgICAgICBpZihyb2xlID09ICJhZG1pbiIpIHsKICAgICAgICAgICAgICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4MDgzL3RpY2tldC9hZG1pbiIpCiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRpY2tldHMgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgaWYocm9sZSA9PSAiZW1wbG95ZWUiKSB7CiAgICAgICAgICAgICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4My90aWNrZXQvZW1wbG95ZWUvIit0aGlzLnVzZXJuYW1lKQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50aWNrZXRzID0gcmVzcG9uc2UuZGF0YQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4MDgzL3RpY2tldC9tYWludGFpbmVyLyIrdGhpcy51c2VybmFtZSkKICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMudGlja2V0cyA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGRlbGV0ZVRpY2tldChpbmRleCkgewogICAgICAgICAgICBheGlvcy5kZWxldGUoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4My90aWNrZXQvZGVsZXRlLyIrdGhpcy50aWNrZXRzW2luZGV4XS50aWNrZXRfaWQpCiAgICAgICAgICAgIHRoaXMuJGRlbGV0ZSh0aGlzLnRpY2tldHMsIGluZGV4KQogICAgICAgIH0sCiAgICAgICAgZWRpdFRpY2tldChpbmRleCkgewogICAgICAgICAgICB0aGlzLiR2LiR0b3VjaCgpOwogICAgICAgICAgICBpZih0aGlzLnRpY2tldHNbaW5kZXhdLnN0YXR1cyA9PSAiUGVuZGluZyBjb25maXJtYXRpb24iKSB7CiAgICAgICAgICAgICAgICB0aGlzLnRpY2tldHNbaW5kZXhdLnN0YXR1cyA9ICJhc3NpZ25lZCIKICAgICAgICAgICAgICAgIGF4aW9zLnB1dCgiaHR0cDovL2xvY2FsaG9zdDo4MDgzL3RpY2tldC91cGRhdGUvIit0aGlzLnRpY2tldHNbaW5kZXhdLnRpY2tldF9pZCwge3N0YXR1czogdGhpcy50aWNrZXRzW2luZGV4XS5zdGF0dXMsIG1haW50YWluZXI6IHRoaXMuc2VsZWN0ZWRbaW5kZXhdfSkKICAgICAgICAgICAgICAgIGlmKHRoaXMucm9sZSAhPSAibWFpbnRhaW5lciIpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29uZmlybUJ1dHRvbiIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmKHRoaXMudGlja2V0c1tpbmRleF0uc3RhdHVzID09ICJhc3NpZ25lZCIpIHsKICAgICAgICAgICAgICAgIHRoaXMudGlja2V0c1tpbmRleF0uc3RhdHVzID0gIndvcmsgaW4gcHJvZ3Jlc3MiCiAgICAgICAgICAgICAgICBheGlvcy5wdXQoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4My90aWNrZXQvdXBkYXRlLyIrdGhpcy50aWNrZXRzW2luZGV4XS50aWNrZXRfaWQsIHtzdGF0dXM6IHRoaXMudGlja2V0c1tpbmRleF0uc3RhdHVzfSkKICAgICAgICAgICAgICAgIHRoaXMubWFpbnRhaW5lckJ1dHRvbiA9ICJXb3JrIGZpbmlzaGVkIgogICAgICAgICAgICB9IGVsc2UgaWYodGhpcy50aWNrZXRzW2luZGV4XS5zdGF0dXMgPT0gIndvcmsgaW4gcHJvZ3Jlc3MiKSB7CiAgICAgICAgICAgICAgICB0aGlzLnRpY2tldHNbaW5kZXhdLnN0YXR1cyA9ICJ3b3JrIGRvbmUiCiAgICAgICAgICAgICAgICBheGlvcy5wdXQoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4My90aWNrZXQvdXBkYXRlLyIrdGhpcy50aWNrZXRzW2luZGV4XS50aWNrZXRfaWQsIHtzdGF0dXM6IHRoaXMudGlja2V0c1tpbmRleF0uc3RhdHVzfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2hvd0Zvcm0oKSB7CiAgICAgICAgICAgIHZhciB4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm1UaWNrZXQiKQogICAgICAgICAgICBpZih4LnN0eWxlLmRpc3BsYXkgPT0gIm5vbmUiKSB7CiAgICAgICAgICAgICAgICB4LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siCiAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvblRleHQgPSAiQ2xvc2UiCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB4LnN0eWxlLmRpc3BsYXkgPSAibm9uZSIKICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uVGV4dCA9ICJDcmVhdGUgbmV3IHRpY2tldCIKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcG9zdERhdGEoKSB7CiAgICAgICAgICAgIHRoaXMuJHYuJHRvdWNoKCk7CiAgICAgICAgICAgIGlmKHRoaXMuc2VsZWN0ZWQuYXNzZXQgJiYgdGhpcy5uZXdEZXNjcmlwdGlvbikgewogICAgICAgICAgICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MDgzL3RpY2tldC9uZXciLCB7ZGVzY3JpcHRpb246IHRoaXMubmV3RGVzY3JpcHRpb24sIG9wZW5EYXRlOiB0aGlzLm15RGF0ZSwgc3RhdHVzOiB0aGlzLm5ld1N0YXR1cywgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsIGFzc2V0X2lkOiB0aGlzLnNlbGVjdGVkLmFzc2V0fSx7aGVhZGVyczp7J0NvbnRlbnQtVHlwZScgOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04J319KQogICAgICAgICAgICAgICAgdmFyIHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybVRpY2tldCIpCiAgICAgICAgICAgICAgICB4LnN0eWxlLmRpc3BsYXkgPSAibm9uZSIgIAogICAgICAgICAgICAgICAgdGhpcy5idXR0b25UZXh0ID0gIkNyZWF0ZSBuZXcgdGlja2V0IgoKICAgICAgICAgICAgICAgIHRoaXMubmV3RGVzY3JpcHRpb24gPSAnJwogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZC5hc3NldCA9ICcnCiAgICAgICAgICAgICAgICB0aGlzLiR2LiRyZXNldCgpOwoKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["InfoAccount.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"InfoAccount.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <div class=\"user-info\">\n            <h3>Account info</h3>\n            <p>Username: {{username}}</p>\n            <p>Email: {{email}}</p>\n            <p>First name: {{firstname}}</p>\n            <p>Last name: {{lastname}}</p>\n            <p>Role: {{role}}</p>\n            <button @click=\"logout\">Logout</button>\n        </div>\n\n        <div id=\"buttons\">\n            <button @click=\"showListUsers\">List users</button><br>\n            <button @click=\"showListAssets\">Assets</button>\n        </div>\n\n        <button @click=\"showForm\">{{buttonText}}</button>\n        <div id=\"formTicket\" style=\"display: none;\">\n            <form @submit.prevent=\"postData\" method=\"post\" id=\"newTicket\">\n                <div class=\"form-group\">\n                    <input type=\"date\" name=\"openDate\" v-model=\"myDate\" class=\"form-control\" readonly>\n                </div>\n                <div class=\"form-group\">\n                    <textarea name=\"description\" v-model=\"newDescription\" cols=\"30\" rows=\"5\" class=\"form-control\" placeholder=\"Description of the problem...\"></textarea>\n                    <span v-if=\"!$v.newDescription.required && $v.newDescription.$dirty\" class=\"text-danger\">Description is required!</span>\n                </div>\n                <div class=\"form-group\">\n                    <input type=\"text\" name=\"status\" v-model=\"newStatus\" class=\"form-controll\" style=\"display:none\">\n                </div>\n                <div class=\"form-group\">\n                    <input type=\"text\" name=\"username\" v-model=\"username\" class=\"form-controll\" readonly>\n                </div>\n                <div class=\"form-group\">\n                    <select v-model=\"selected.asset\" name=\"asset\" class=\"form-control\">\n                        <option value=\"\" disabled selected>Select asset</option>\n                        <option v-for=\"asset in assets\" v-bind:key=\"asset.asset_id\">{{asset.id}}</option>\n                    </select>\n                    <span v-if=\"!$v.selected.asset.required && $v.selected.asset.$dirty\" class=\"text-danger\">Asset is required!</span>\n                </div>\n                <button type=\"submit\">Confirm</button>\n            </form>\n        </div>\n\n        <div class=\"tickets\">\n            <ul style=\"list-style-type:none;\" >\n                <li v-for=\"(ticket, index) in tickets\" v-bind:key=\"ticket.ticket_id\">\n                ID: {{ticket.ticket_id}} - {{ticket.openDate | formatDate }} - Asset: {{ticket.asset_id}} - {{ticket.description}} - Status: {{ticket.status}}\n                \n                <!-- <div id=\"maintainerShow\"> - Maintainer: \n                    <input type=\"text\"  name=\"username\" v-model=\"inputM[index]\" class=\"form-control\" >\n                </div> -->\n                \n                <div id=\"chooseMaintainer\">\n                    <select v-model=\"selected[index]\" name=\"maintainer\" class=\"form-control\" id=\"selectMaintainer\">\n                        <option value=\"\" disabled selected>Select maintainer</option>\n                        <option v-for=\"maintainer in maintainers\" v-bind:key=\"maintainer.username\">{{maintainer.username}}</option>\n                    </select>\n                    <span v-if=\"!$v.selected[index].required && $v.selected[index].$dirty\" class=\"text-danger\">Maintainer is required!</span>\n                </div>\n\n                <div v-if=\"role == 'admin' && (ticket.status == 'Pending confirmation')\" id=\"confirmButton\" ><button @click=\"editTicket(index)\">{{confirmButton}}</button></div>\n                <div v-if=\"role == 'admin'\" id=\"deleteButton\"><button @click=\"deleteTicket(index)\">Reject ticket</button></div>\n                <div v-if=\"role == 'maintainer'\" id=\"accepetWork\"><button @click=\"editTicket(index)\">{{maintainerButton}}</button></div>\n                </li>\n            </ul>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Vue from 'vue'   \nimport axios from 'axios'\nimport VueAxios from 'vue-axios' \nimport Vuelidate from 'vuelidate'\nimport {required} from 'vuelidate/lib/validators'\n\nVue.use(VueAxios, axios)\nVue.use(Vuelidate)\n\nexport default {\n    name: \"InfoAccount\",\n    \n    data() {\n        return {\n            //user: {\n                username: '',\n                password:'',\n                firstname:'',\n                lastname:'',\n                email:'',\n                role:'',\n            //}\n                tickets: [],\n                myDate : new Date().toISOString().slice(0,10),\n                buttonText: 'Create new ticket',\n                confirmButton: 'Accept ticket',\n                newStatus: 'Pending confirmation',\n                newDescription: '',\n\n                assets: [],\n                maintainers: [],\n                selected: {\n                    asset: '',\n                    maintainer: ''\n                },\n                buttonView: '',\n                maintainerButton: 'Accept work',\n                inputM: []\n        }\n    },\n    validations: {\n        selected: {\n            asset: {required},\n            maintainer: {required},\n            selected: {required}\n        },\n        newDescription: {required}\n    },\n    mounted() {\n        this.getData(),\n        this.getAssets(),\n        this.getMaintainers()\n    },\n    methods: {\n        getData() {\n            axios.get(\"http://localhost:8081/user/\"+this.$route.params.username)\n            .then((response) => {\n                this.username = response.data.username\n                this.firstname = response.data.firstname\n                this.lastname = response.data.lastname\n                this.email = response.data.email\n                this.role = response.data.role\n\n                this.showTickets(this.role) \n            })\n        },\n        getAssets() {\n            axios.get(\"http://localhost:8082/asset/\")\n            .then((response) => {\n                this.assets = response.data\n            })\n        },\n        getMaintainers() {\n            axios.get(\"http://localhost:8081/user/role/maintainer\")\n            .then((response) => {\n                this.maintainers = response.data\n            })\n        },\n        showListUsers() {\n            this.$router.push({path: '/listusers/'})\n        },\n        showListAssets() {\n            this.$router.push({path: '/listassets'})\n        },\n        logout() {\n            this.$router.push({path: '/'})\n        },\n        showTickets(role) {\n            if(role == \"admin\") {\n                axios.get(\"http://localhost:8083/ticket/admin\")\n                .then((response) => {\n                    this.tickets = response.data\n                })\n            } else if(role == \"employee\") {\n                axios.get(\"http://localhost:8083/ticket/employee/\"+this.username)\n                .then((response) => {\n                    this.tickets = response.data\n                })\n            } else {\n                axios.get(\"http://localhost:8083/ticket/maintainer/\"+this.username)\n                .then((response) => {\n                    this.tickets = response.data\n                })\n            }\n        },\n        deleteTicket(index) {\n            axios.delete(\"http://localhost:8083/ticket/delete/\"+this.tickets[index].ticket_id)\n            this.$delete(this.tickets, index)\n        },\n        editTicket(index) {\n            this.$v.$touch();\n            if(this.tickets[index].status == \"Pending confirmation\") {\n                this.tickets[index].status = \"assigned\"\n                axios.put(\"http://localhost:8083/ticket/update/\"+this.tickets[index].ticket_id, {status: this.tickets[index].status, maintainer: this.selected[index]})\n                if(this.role != \"maintainer\") {\n                    document.getElementById(\"confirmButton\").style.display = \"none\"\n                }\n            } else if(this.tickets[index].status == \"assigned\") {\n                this.tickets[index].status = \"work in progress\"\n                axios.put(\"http://localhost:8083/ticket/update/\"+this.tickets[index].ticket_id, {status: this.tickets[index].status})\n                this.maintainerButton = \"Work finished\"\n            } else if(this.tickets[index].status == \"work in progress\") {\n                this.tickets[index].status = \"work done\"\n                axios.put(\"http://localhost:8083/ticket/update/\"+this.tickets[index].ticket_id, {status: this.tickets[index].status})\n            }\n        },\n        showForm() {\n            var x = document.getElementById(\"formTicket\")\n            if(x.style.display == \"none\") {\n                x.style.display = \"block\"\n                this.buttonText = \"Close\"\n            } else {\n                x.style.display = \"none\"\n                this.buttonText = \"Create new ticket\"\n            }\n        },\n        postData() {\n            this.$v.$touch();\n            if(this.selected.asset && this.newDescription) {\n                axios.post(\"http://localhost:8083/ticket/new\", {description: this.newDescription, openDate: this.myDate, status: this.newStatus, username: this.username, asset_id: this.selected.asset},{headers:{'Content-Type' : 'application/json;charset=utf-8'}})\n                var x = document.getElementById(\"formTicket\")\n                x.style.display = \"none\"  \n                this.buttonText = \"Create new ticket\"\n\n                this.newDescription = ''\n                this.selected.asset = ''\n                this.$v.$reset();\n\n                this.getData()\n            }\n        }\n    }\n}\n</script>\n\n<style>\n#maintainerShow {\n    display: inline-block;\n}\n\n\n</style>"]}]}