{"remainingRequest":"/Users/antoniobelculfine/Vue-ticket-manager/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/antoniobelculfine/Vue-ticket-manager/src/components/ListAssets.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/antoniobelculfine/Vue-ticket-manager/src/components/ListAssets.vue","mtime":1630596810729},{"path":"/Users/antoniobelculfine/Vue-ticket-manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antoniobelculfine/Vue-ticket-manager/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/antoniobelculfine/Vue-ticket-manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antoniobelculfine/Vue-ticket-manager/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJyAKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwppbXBvcnQgVnVlQXhpb3MgZnJvbSAndnVlLWF4aW9zJyAgCmltcG9ydCBWdWVsaWRhdGUgZnJvbSAndnVlbGlkYXRlJwppbXBvcnQge3JlcXVpcmVkfSBmcm9tICd2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMnCgppbXBvcnQgJy4uL2Fzc2V0cy9zdHlsZS9jb21wb25lbnRzL0xpc3RBc3NldHMuY3NzJwoKVnVlLnVzZShWdWVBeGlvcywgYXhpb3MpClZ1ZS51c2UoVnVlbGlkYXRlKQoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0xpc3RBc3NldHMnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBhc3NldHM6IFtdLAogICAgICAgICAgICBuZXdOYW1lOiAnJywKICAgICAgICAgICAgbmV3U3RhdHVzOiAnJywKICAgICAgICAgICAgYnV0dG9uVGV4dDogJ0NyZWF0ZSBuZXcgYXNzZXQnCiAgICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRpb25zOiB7CiAgICAgICAgbmV3TmFtZToge3JlcXVpcmVkfSwKICAgICAgICBuZXdTdGF0dXM6IHtyZXF1aXJlZH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuZ2V0RGF0YSgpCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGdldERhdGEoKSB7CiAgICAgICAgICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4MDgyL2Fzc2V0LyIpCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5hc3NldHMgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBkZWxldGVBc3NldChpbmRleCkgewogICAgICAgICAgICBheGlvcy5kZWxldGUoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4Mi9hc3NldC9kZWxldGUvIit0aGlzLmFzc2V0c1tpbmRleF0uaWQpCiAgICAgICAgICAgIHRoaXMuJGRlbGV0ZSh0aGlzLmFzc2V0cywgaW5kZXgpCiAgICAgICAgfSwKICAgICAgICBlZGl0QXNzZXQoaW5kZXgpIHsKICAgICAgICAgICAgaWYodGhpcy5hc3NldHNbaW5kZXhdLnN0YXR1cyA9PSAib3BlcmF0aW5nIikgewogICAgICAgICAgICAgICAgdGhpcy5hc3NldHNbaW5kZXhdLnN0YXR1cyA9ICJvdXQgb2Ygc2VydmljZSIKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRzW2luZGV4XS5zdGF0dXMgPSAib3BlcmF0aW5nIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGF4aW9zLnB1dCgiaHR0cDovL2xvY2FsaG9zdDo4MDgyL2Fzc2V0L3VwZGF0ZS8iK3RoaXMuYXNzZXRzW2luZGV4XS5pZCwge3N0YXR1czogdGhpcy5hc3NldHNbaW5kZXhdLnN0YXR1c30pCiAgICAgICAgfSwKICAgICAgICBvcGVuQXNzZXRGb3JtKCkgewogICAgICAgICAgICB2YXIgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtQXNzZXQiKQogICAgICAgICAgICBpZih4LnN0eWxlLmRpc3BsYXkgPT0gIm5vbmUiKSB7CiAgICAgICAgICAgICAgICB4LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siCiAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvblRleHQgPSAiQ2xvc2UiCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB4LnN0eWxlLmRpc3BsYXkgPSAibm9uZSIKICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uVGV4dCA9ICJDcmVhIG5ldyBhc3NldCIKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcG9zdERhdGEoKSB7CiAgICAgICAgICAgIHRoaXMuJHYuJHRvdWNoKCk7CiAgICAgICAgICAgIGlmKHRoaXMubmV3TmFtZSAmJiB0aGlzLm5ld1N0YXR1cykgewogICAgICAgICAgICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MDgyL2Fzc2V0L25ldyIsIHtuYW1lOiB0aGlzLm5ld05hbWUsIHN0YXR1czogdGhpcy5uZXdTdGF0dXN9LHtoZWFkZXJzOnsnQ29udGVudC1UeXBlJyA6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnfX0pCiAgICAgICAgICAgICAgICB2YXIgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtQXNzZXQiKQogICAgICAgICAgICAgICAgeC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiICAgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpCiAgICAgICAgICAgICAgICB0aGlzLmdldERhdGEoKSAvL3doeT8/CgogICAgICAgICAgICAgICAgdGhpcy5uZXdOYW1lID0gJycKICAgICAgICAgICAgICAgIHRoaXMubmV3U3RhdHVzID0gJycKICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uVGV4dCA9ICdDcmVhdGUgbmV3IGFzc2V0JwogICAgICAgICAgICAgICAgdGhpcy4kdi4kcmVzZXQoKTsKICAgICAgICAgICAgfSAKICAgICAgICB9LAogICAgICAgIGJhY2tCdXR0b24oKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["ListAssets.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListAssets.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <div>\n            <button @click=\"openAssetForm\" id=\"new-asset\">{{buttonText}}</button>\n            <div id=\"formAsset\" style=\"display: none;\">\n                <form @submit.prevent=\"postData\" method=\"post\" id=\"newAsset\">\n                    <div class=\"form-group\">\n                        <input id=\"name-asset\" type=\"text\" name=\"name\" placeholder=\"Name asset\" v-model=\"newName\" class=\"form-control\"><br>\n                        <span v-if=\"!$v.newName.required && $v.newName.$dirty\" class=\"text-danger\">Name asset is required!</span>\n                    </div>\n                    <div class=\"form-group\">\n                        <select id=\"select-status\" v-model=\"newStatus\" class=\"form-control\">\n                            <option value=\"\" disabled selected>Select status</option>\n                            <option value=\"operating\">Operative</option>\n                            <option value=\"out of service\">Out of service</option>\n                        </select><br>\n                        <span v-if=\"!$v.newStatus.required && $v.newStatus.$dirty\" class=\"text-danger\">Status asset is required!</span>\n                    </div>\n                    <button id=\"confirm-asset\" type=\"submit\">Confirm</button>\n                </form>\n            </div>\n        </div>\n\n        <div id=\"assetsList\">\n            <table id=\"table-assets\">\n                <tr>\n                    <th>ID</th>\n                    <th>Name</th>\n                    <th>Status</th>\n                </tr>\n                <tr v-for=\"(asset, index) in assets\" v-bind:key=\"asset.asset_id\">\n                    <td>{{asset.id}}</td>\n                    <td>{{asset.name}}</td>\n                    <td>{{asset.status}}</td>\n                    <td><button id=\"delete-asset\" @click=\"deleteAsset(index)\">Delete asset</button></td>\n                </tr>\n            </table>\n        </div>\n        <button id=\"back-asset\" @click=\"backButton\">Back</button>\n    </div>\n</template>\n\n<script>\nimport Vue from 'vue' \nimport axios from 'axios'\nimport VueAxios from 'vue-axios'  \nimport Vuelidate from 'vuelidate'\nimport {required} from 'vuelidate/lib/validators'\n\nimport '../assets/style/components/ListAssets.css'\n\nVue.use(VueAxios, axios)\nVue.use(Vuelidate)\n\nexport default {\n    name: 'ListAssets',\n    data() {\n        return {\n            assets: [],\n            newName: '',\n            newStatus: '',\n            buttonText: 'Create new asset'\n        }\n    },\n    validations: {\n        newName: {required},\n        newStatus: {required}\n    },\n    mounted() {\n        this.getData()\n    },\n    methods: {\n        getData() {\n            axios.get(\"http://localhost:8082/asset/\")\n            .then((response) => {\n                this.assets = response.data\n            })\n        },\n        deleteAsset(index) {\n            axios.delete(\"http://localhost:8082/asset/delete/\"+this.assets[index].id)\n            this.$delete(this.assets, index)\n        },\n        editAsset(index) {\n            if(this.assets[index].status == \"operating\") {\n                this.assets[index].status = \"out of service\"\n            } else {\n                this.assets[index].status = \"operating\"\n            }\n            axios.put(\"http://localhost:8082/asset/update/\"+this.assets[index].id, {status: this.assets[index].status})\n        },\n        openAssetForm() {\n            var x = document.getElementById(\"formAsset\")\n            if(x.style.display == \"none\") {\n                x.style.display = \"block\"\n                this.buttonText = \"Close\"\n            } else {\n                x.style.display = \"none\"\n                this.buttonText = \"Crea new asset\"\n            }\n        },\n        postData() {\n            this.$v.$touch();\n            if(this.newName && this.newStatus) {\n                axios.post(\"http://localhost:8082/asset/new\", {name: this.newName, status: this.newStatus},{headers:{'Content-Type' : 'application/json;charset=utf-8'}})\n                var x = document.getElementById(\"formAsset\")\n                x.style.display = \"none\"   \n                \n                this.getData()\n                this.getData() //why??\n\n                this.newName = ''\n                this.newStatus = ''\n                this.buttonText = 'Create new asset'\n                this.$v.$reset();\n            } \n        },\n        backButton() {\n            this.$router.go(-1)\n        }\n    }\n}\n</script>\n\n"]}]}